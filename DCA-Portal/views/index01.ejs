<!DOCTYPE html>
<html lang="en">
<head>
    <!--meta charset="UTF-8"-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index 01</title>
    <style>
        header, .tabs{
            padding: 8px;
            /*border-radius: 20px;
            box-shadow: 0 2px 5px 0 rgba(0,0,0,.3);*/
            width: 50%;
            margin: 25px auto;
            font-family: sans-serif;
        }
        header p{
            padding: 0 15px;
        }
        .link{
            background-color: transparent;
            border: none;
            color: #777;
            /*font-size: 1rem;*/
            cursor: pointer;
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }
        .link:hover, .dropdown > .link:focus{
            background-color: #eee;
        }
        .dropdown{
            position: relative;
        }
        .header{padding: .3rem;/*border: 1px solid yellowgreen;*/display: flex;align-items: center;justify-content: space-between;}
        
        .dropdown-menu{
            background-color: #fff;
            position: absolute;
            right: calc(100% - 50px);
            top: 50px;
            padding: 8px 0;
            box-shadow: 0 2px 5px 0 rgba(0,0,0,.3);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            width: 150px;
            /*opacity: 0;*/
            display: none;
        }
        .dropdown > .link:focus + .dropdown-menu{
            /*opacity: 1;*/
            display:inline-block;
            z-index: 1;
        }
        .dropdown-menu > a{
            display: block;
            text-decoration: none;
            color: #777;
            padding: 16px;
        }
        .dropdown-menu > a:hover{
            background-color: #eee;
        }
        .dot-menu-icon{
            pointer-events: none;
            /*display: block;*/
            height: 50%;
            width: 50%;
            color: gray;
        }
        .header span{
            padding: 5px 20px;
        }
        /*.header span:not(:last-of-type){
            border-right: 1px solid #777;
        }*/
    </style>
</head>
<body>
    <header style="display: flex;align-items: center;">
        <svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" style="pointer-events: none; width: 5%; height: 5%;fill: #445793;">
            <g>
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </g>
        </svg>
        <span style="margin-left: 10px;"><%= name %></span>
    </header>
    <%# if(locals.fileLink != null) { %>
        
    <%# } %>
    <div class="tabs" style="display: flex;flex-direction: column;">
        <div style="padding:8px;margin:20px 0;border-bottom:1px solid #ccc;">Activities</div>
        <%# if(result) then forEach else display no activity%>
        <% result.forEach((obj, ind) => { %>
            <% const date = new Date(obj.createdAt); %>
            <% const options = { year: 'numeric', month: 'long', day: 'numeric' }; %>
            <% const formattedDate = new Intl.DateTimeFormat('en-US', options).format(date); %>

            <div class="header">
                <span style="width: 150px;"><%= formattedDate %></span>|
                <span style="width: 60px;text-align: center;"><%= obj.activity %></span>|
                <span style="flex: 2" ><%= obj.originalName.slice(0, obj.originalName.lastIndexOf('.')) %></span>
                <div class="dropdown">
                    <button class="link">
                        <svg class="dot-menu-icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" role="none"><g>
                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z">
                            </path>
                            </g></svg>
                    </button>
                    <div class="dropdown-menu">
                        <a href="<%= locals.fileLink + obj.id %>" download>Download</a>
                        <!--a href="halleluyah">mark as done</a-->
                    </div>
                </div>
            </div>
        <% }) %>
    </div>
    
</body>
</html>